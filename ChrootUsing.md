#Использование chroot среды

# Использование chroot среды #

### Запуск ###

Скрипт установки прописывает всё необходимое для запуска выбранных сервисов в сhroot среде. Сервисы, которые будут стартовать при включении My Book Live перечислены в файле `/DataVolume/debian/chroot-services.list`, по одному сервису в строчке.

_Подсказка: в `chroot-services.list` перечислены имена файлов из `/DataVolume/debian/etc/init.d`, которые необходимо запустить_

Даже если никаких сервисов в chroot среде пока не запускается, перед входом в неё необходимо выполнить скрипт запуска для монтирования необходимых каталогов:
```
/etc/init.d/chroot_debian.sh start
```


### Вход и выход из работающей chroot среды ###

Выполните
```
chroot /DataVolume/debian
```
С виду ничего не изменится, но выполнив **ls /** вы поймёте, что уже не в окружении прошивки. Здесь уже можно без боязни выполнять **apt-get update**, устанавливать, конфигурировать или удалять любые пакеты: перед вами полноценный дистрибутив Debian Wheezy, который можно использовать практически без ограничений. Из-за того, что всё происходит в изолированной "песочнице", файлам прошивки навредить не выйдет при всём желании. После окончания конфигурирования новых сервисов не забудьте внести их перечень в `chroot-services.list`.

Для выхода из chroot среды выполните
```
exit
```
и вы вернётесь в привычное окружение прошивки.


### Остановка ###

```
/etc/init.d/chroot_debian.sh stop
```


### Воостановление автостарта после апгрейда прошивки ###

Необходимо вернуть на законное место скрипт автостарта chroot сервисов
```
/DataVolume/debian/chroot_debian.sh install
```


### Удаление chroot среды ###


Остановите chroot сервисы и удалите скрипт их автозапуска
```
/etc/init.d/chroot_debian.sh stop
/etc/init.d/chroot_debian.sh remove
```

Перегрузите WD My Book Live и удалите все файлы Debian Wheezy
```
rm -fr /DataVolume/debian/
```